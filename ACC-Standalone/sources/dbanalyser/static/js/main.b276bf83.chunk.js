(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{49:function(e,a,t){e.exports=t(92)},54:function(e,a,t){},92:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(17),l=t.n(r);t(54),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=t(18),i=t(19),c=t(22),m=t(20),g=t(15),d=t(23),p=(t(55),t(16)),u=t.n(p),h=t(11),b=t(44),v=t(43),f=t(47),E=t(7),k=t(40),y=t(37),N=t.n(y),I=t(25),S=t(9),P=function(e){function a(e,t){var n;return Object(o.a)(this,a),(n=Object(c.a)(this,Object(m.a)(a).call(this,e,t))).state={jsonData:[],score:10,currentStep:"Initializing ... It could take few minutes depending on number of columns.",scoreFinal:s.a.createElement(S.a,{animation:"border"}),nbAttributes:s.a.createElement(S.a,{animation:"border",size:"sm"}),nbBigColumns:s.a.createElement(S.a,{animation:"border",size:"sm"}),nbLinks:s.a.createElement(S.a,{animation:"border",size:"sm"}),complexJoins:s.a.createElement(S.a,{animation:"border",size:"sm"}),stringJoins:s.a.createElement(S.a,{animation:"border",size:"sm"}),notUsedColumns:s.a.createElement(S.a,{animation:"border",size:"sm"})},n.globalvars={loggerLevel:n.props.loglevel,API_ENDPOINT:n.props.apiEndpoint+n.props.rootSchema+"&analyze="+n.props.analyzedepth+"&sampling="+n.props.sampling,loadingProgress:0},n.scoringWeight={nbAttributes:1,nbBigColumns:1,nbLinks:1,complexJoins:3,notUsedColumns:4},n.scoringThreshold={nbAttributes:200,nbBigColumns:1,nbLinks:10,complexJoins:3,stringJoins:1,notUsedColumns:80},n}return Object(d.a)(a,e),Object(i.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.logger("componentWillReceiveProps",3),this.globalvars.API_ENDPOINT=this.props.apiEndpoint+e.rootSchema+"&analyze="+e.analyzedepth+"&sampling="+this.props.sampling,this.setState({jsonData:[],score:10,currentStep:"Initializing ... It could take few minutes depending on number of columns.",scoreFinal:s.a.createElement(S.a,{animation:"border",size:"sm"}),nbAttributes:s.a.createElement(S.a,{animation:"border",size:"sm"}),nbBigColumns:s.a.createElement(S.a,{animation:"border",size:"sm"}),nbLinks:s.a.createElement(S.a,{animation:"border",size:"sm"}),complexJoins:s.a.createElement(S.a,{animation:"border",size:"sm"}),stringJoins:s.a.createElement(S.a,{animation:"border",size:"sm"}),notUsedColumns:s.a.createElement(S.a,{animation:"border",size:"sm"})}),this.loadJsonApi(this.globalvars.API_ENDPOINT),this.forceUpdate()}},{key:"componentDidMount",value:function(){this.logger("componentDidMount",3),N.a.run(),this.loadJsonApi(this.globalvars.API_ENDPOINT)}},{key:"logger",value:function(e,a){a<=this.globalvars.loggerLevel&&console.log(e)}},{key:"loadJsonApi",value:function(e){var a=this;u.a.get(e).then(function(t){a.logger("loading schema from "+e,3),a.setState({jsonData:t.data,currentStep:"Gathering Data..."}),a.analyzeSchema()})}},{key:"analyzeSchema",value:function(){var e=this.state.jsonData;e.schema_name?this.logger("Json loaded",3):this.logger("Json not loaded yet !!!",3),this.logger(e,3),this.logger("Schema Name: "+e.schema_name,3);var a,t=0,n=0,s=0,r=0,l=0,o=(s=0,0),i=0,c=0,m=0,g=0;for(i in e.nbattributes>this.scoringThreshold.nbAttributes&&(this.logger("Many colmuns:"+e.nbattributes,3),this.setState({score:this.state.score-1*this.scoringWeight.nbAttributes})),e.attributes)"memo"==e.attributes[i].fieldType&&t++,0==e.attributes[i].usageKPI[0].Workflows&&0==e.attributes[i].usageKPI[0].JS&&0==e.attributes[i].usageKPI[0].JSSP&&0==e.attributes[i].usageKPI[0].Webapp&&0==e.attributes[i].usageKPI[0].SQL&&(this.logger("Column not used: "+e.attributes[i].fieldInternalName,3),n++);t>this.scoringThreshold.nbBigColumns&&(this.logger("Big colmuns detected",3),this.setState({score:this.state.score-1*this.scoringWeight.nbBigColumns})),this.logger(e.nbattributes+" - "+n,3),(a=Math.round(100*(e.nbattributes-n)/e.nbattributes,0))<this.scoringThreshold.notUsedColumns&&(this.logger("Not Used colmuns detected",3),this.setState({score:this.state.score-1*this.scoringWeight.notUsedColumns}));var d=!1;for(c in e.links)for(m in r++,l=0,d=!1,e.links[c].joinparts)if(e.links[c].joinparts[m].source_name){if(++l>=this.scoringThreshold.complexJoins){for(g in e.attributes)if(e.attributes[g].fieldInternalName==e.links[c].joinparts[m].source_name&&e.attributes[g].fieldType.indexOf("string")>=0&&(o++,this.logger("String Join found :"+e.links[c].joinparts[m].source_name+"("+e.attributes[g].fieldType+")",3),o>=this.scoringThreshold.stringJoins)){s++,d=!0;break}if(d)break}}else r--;return s>0&&(this.logger("At least one Complex Join detected",0),this.setState({score:this.state.score-1*this.scoringWeight.complexJoins})),r>this.scoringThreshold.nbLinks&&(this.logger("Many links detected",3),this.setState({score:this.state.score-1*this.scoringWeight.nbLinks})),this.setState({nbAttributes:e.nbattributes,nbBigColumns:t,nbLinks:r,complexJoins:s,notUsedColumns:a+" %",stringJoins:o,scoreFinal:this.state.score+"/10"}),this.setState({currentStep:"Analyze successful"}),!0}},{key:"closeAnalyzer",value:function(){document.getElementById("main-analyzer").style.display="none"}},{key:"renderStackedChart",value:function(){window.open("columnDistributionChart.html?url="+encodeURIComponent(this.globalvars.API_ENDPOINT),"_blank")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"main-analyzer-container",className:"main-container"},s.a.createElement(I.a,{bg:"dark",variant:"dark"},s.a.createElement(I.a.Brand,{href:"#",onClick:function(){return e.closeAnalyzer()}},s.a.createElement("img",{alt:"",src:"close.png",width:"30",height:"30",className:"d-inline-block align-top"})," "+this.props.rootSchema+" ("+this.state.currentStep+")")),s.a.createElement(k.a,null,s.a.createElement(E.a,{border:"secondary",style:{width:"25rem"}},s.a.createElement(E.a.Img,{variant:"top",src:"holder.js/100px160?theme=sky&text=Attributes&size=24"}),s.a.createElement(E.a.Body,null,s.a.createElement(E.a.Title,null,"Indicators"),s.a.createElement(E.a.Text,null,s.a.createElement("div",null,"Number of attributes: ",s.a.createElement("b",null,this.state.nbAttributes)),s.a.createElement("div",null,"Number of Large attributes: ",s.a.createElement("b",null,this.state.nbBigColumns)),s.a.createElement("div",null,"Attributes overall usage propensity: ",s.a.createElement("b",null,this.state.notUsedColumns)))),s.a.createElement(E.a.Footer,null,s.a.createElement("a",{href:"#",onClick:function(){return e.renderStackedChart()}},s.a.createElement("small",{className:"text-muted"},"Display Data Distribution")))),s.a.createElement(E.a,{border:"secondary",style:{width:"25rem"}},s.a.createElement(E.a.Img,{variant:"top",src:"holder.js/100px160?theme=sky&text=Links&size=24"}),s.a.createElement(E.a.Body,null,s.a.createElement(E.a.Title,null,"Indicators"),s.a.createElement(E.a.Text,null,s.a.createElement("div",null,"Total number of joins: ",s.a.createElement("b",null,this.state.nbLinks)),s.a.createElement("div",null,"Number of complex joins: ",s.a.createElement("b",null,this.state.complexJoins)))),s.a.createElement(E.a.Footer,null,s.a.createElement("small",{className:"text-muted"},"More details here"))),s.a.createElement(E.a,{border:"secondary",style:{width:"25rem"}},s.a.createElement(E.a.Img,{variant:"top",src:"holder.js/100px160?theme=sky&text=Design Scoring&size=24"}),s.a.createElement(E.a.Body,null,s.a.createElement(E.a.Title,null,s.a.createElement("div",{className:"text-center"},"Overall Score")),s.a.createElement(E.a.Text,null,s.a.createElement("div",{className:"text-center"},s.a.createElement("font",{size:"30"},this.state.scoreFinal)))),s.a.createElement(E.a.Footer,null,s.a.createElement("small",{className:"text-muted"},"More details here")))))}}]),a}(n.Component),A=t(2),D=t(42),w=t(45),x=t(13),L=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).downloadDiagramFile=function(){var e=document.createElement("a"),a=new Blob([JSON.stringify(z.serializeDiagram())],{type:"application/json"});e.href=URL.createObjectURL(a),e.download="diagramAnalyserSaved.json",document.body.appendChild(e),e.click()},t.saveGraphViaSerialize=t.saveGraphViaSerialize.bind(Object(g.a)(t)),t.restoreGraphViaSerialize=t.restoreGraphViaSerialize.bind(Object(g.a)(t)),t.savedSerializedGraph="",t.state={analyzerContainer:null,username:"",password:"",configPanelLoaded:!1},t.globalvars={jsonData:[],jsonTargetMappings:[],columnsdepth:parseInt(t.props.columnsdepth),displayLinks:!0,preset:t.props.preset,loggerLevel:t.props.loglevel,API_MAPPINGS_ENDPOINT:t.props.baseURL+"/"+t.props.jsspns+"/diagramGetMappings.jssp?user="+t.props.username+"&password="+t.props.password,API_SCHEMA_ENDPOINT:t.props.baseURL+"/"+t.props.jsspns+"/diagramExplorer.jssp?user="+t.props.username+"&password="+t.props.password+"&schema=",schemaDocURL:t.props.baseURL+"/xtk/schemaDocumentation.jssp?schema=",selectedSchema:t.props.rootSchema,loadingProgress:0,maxtoload:parseInt(t.props.maxtoload),nodePosX:100,nodePosY:140,strSavedGraph:"",analyzedepth:t.props.analyzedepth,nocache:t.props.nocache,jsspns:t.props.jsspns},t.logger("Initialize Diagram",3),t.logger("MAX columns per node : "+t.props.columnsdepth,4),t.logger("preset :  "+t.props.preset,4),t.logger("log level : "+t.props.loglevel,4),t.logger("Max target mappings to load : "+t.props.maxtoload,4),t.logger("Analyze depth for workflows (nb days) : "+t.props.analyzedepth,4),t.logger("No Cache : "+t.props.nocache,4),t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.logger("componentDidMount",4),this.logger(this.globalvars.API_MAPPINGS_ENDPOINT,4),""!=this.props.username&&""!=this.props.password&&(this.setState({validated:!0,username:this.props.username,password:this.props.password}),this.globalvars.selectedSchema?(this.logger("loading schema : "+this.globalvars.selectedSchema,3),this.loadJsonApi(this.globalvars.API_SCHEMA_ENDPOINT+this.globalvars.selectedSchema)):(this.logger("loading all schemas with a target mapping : ",3),this.loadMappingsApi(this.globalvars.API_MAPPINGS_ENDPOINT,this.globalvars.maxtoload)))}},{key:"loadSchemaAnalyzer",value:function(){if(z.getSelectedItems()[0]){var e=z.getSelectedItems()[0];this.logger("Analyzing the node : "+e.name,3),document.getElementById("main-analyzer").style.display="block",this.setState({analyzerContainer:s.a.createElement(P,{apiEndpoint:this.globalvars.API_SCHEMA_ENDPOINT,rootSchema:this.globalvars.selectedSchema,loglevel:this.globalvars.loggerLevel,analyzedepth:this.props.analyzedepth,sampling:this.props.sampling,nocache:this.props.nocache})})}}},{key:"loadConfigPanel",value:function(){this.state.configPanelLoaded?(this.logger("Hide the advanced config panel",0),this.setState({configPanelLoaded:!1}),document.getElementById("main-configPanel").style.display="none"):(this.logger("Display the advanced config panel",0),this.setState({configPanelLoaded:!0}),document.getElementById("main-configPanel").style.display="block")}},{key:"saveGraphViaSerialize",value:function(){this.globalvars.strSavedGraph=JSON.stringify(z.serializeDiagram()),this.logger("Diagram saved",3)}},{key:"restoreGraphViaSerialize",value:function(){try{var e=new x.DiagramModel;e.deSerializeDiagram(JSON.parse(this.globalvars.strSavedGraph),C),z=e,C.setDiagramModel(z),this.forceUpdate(),this.forceUpdate()}catch(a){this.logger("Error while restoring the Diagram. No saved diagram to restore",0)}}},{key:"loadDiagramFromFile",value:function(e){var a=this;console.log("FILE READER");var t=new FileReader;t.onabort=function(){return a.logger("file reading was aborted",3)},t.onerror=function(){return a.logger("file reading has failed",3)},t.onload=function(){try{var e=t.result,n=new x.DiagramModel;n.deSerializeDiagram(JSON.parse(e),C),z=n,C.setDiagramModel(z),a.forceUpdate(),a.forceUpdate()}catch(s){a.logger("Error while parsing the Diagram. File not compatible. Loading aborted",1)}},e.forEach(function(e){return t.readAsBinaryString(e)})}},{key:"logger",value:function(e,a){a<=this.globalvars.loggerLevel&&console.log(e)}},{key:"loadJsonApi",value:function(e){var a=this;u.a.get(e).then(function(t){a.logger("loading schema from "+e,3),a.globalvars.jsonData=t.data,a.globalvars.startPosX=a.globalvars.startPosX+100,a.generateSchema(),a.forceUpdate()})}},{key:"loadMappingsApi",value:function(e,a){var t=this;u.a.get(e).then(function(n){t.logger("loading mappings from "+e,3),t.logger(n.data.mappings,3);var s=Object.values(n.data.mappings).length;t.logger("Nb Mappings to load: "+s,3);var r=0;for(r in t.globalvars.jsonTargetMappings=n.data.mappings,n.data.mappings){var l=!1;if(r>=parseInt(a)){t.globalvars.loadingProgress=100;break}if(t.globalvars.loadingProgress=100*(parseInt(r)+1)/s,t.logger("Loading "+t.globalvars.loadingProgress+"%",3),t.parsePreset(n.data.mappings[r].namespace,n.data.mappings[r].schemaname)){t.logger("Canditate mapping schemas : "+n.data.mappings[r].namespace+":"+n.data.mappings[r].schemaname,3);var o=z.getNodes(),i=0;for(i in Object.keys(o)){var c=z.getNode(o[Object.keys(o)[i]]);if(c.name==n.data.mappings[r].namespace+":"+n.data.mappings[r].schemaname){var m=Object.values(c.getPorts()).length;if(t.logger("Node to load matches with existing node: "+c.name,3),t.logger("Existing node has "+m+" nodes",3),m>2){l=!0;break}}}l?t.logger("ABORTING loading mapping schema : "+n.data.mappings[r].namespace+":"+n.data.mappings[r].schemaname,3):(t.logger("loading mapping schema : "+n.data.mappings[r].namespace+":"+n.data.mappings[r].schemaname,3),t.loadJsonApi(t.globalvars.API_SCHEMA_ENDPOINT+n.data.mappings[r].namespace+":"+n.data.mappings[r].schemaname))}}})}},{key:"loadSelectedSchema",value:function(){if(z.getSelectedItems()[0]){var e=z.getSelectedItems()[0];this.globalvars.nodePosX=e.x+300,this.globalvars.nodePosY=e.y;var a=Object.values(e.getPorts()).length;this.logger(a,4),a<=2?(this.logger("Loading the node : "+e.name,3),this.loadJsonApi(this.globalvars.API_SCHEMA_ENDPOINT+e.name)):this.logger("ABORTING Loading the node : "+e.name,3)}}},{key:"getDocumentationURL",value:function(){var e=this.globalvars.schemaDocURL+this.globalvars.selectedSchema;return this.logger(e,3),e}},{key:"createNodeIfNotExist",value:function(e,a,t,n){var s=this,r=e.getNodes(),l=0;for(l in Object.keys(r)){var o=e.getNode(r[Object.keys(r)[l]]);if(o.name==a)return this.globalvars.nodePosY>120&&(this.globalvars.nodePosY-=10),o}var i=0,c=this.globalvars.jsonTargetMappings,m=!1,g="";for(i in c)if(c[i].namespace+":"+c[i].schemaname==a){this.logger("Node "+t+":"+a+" is a target mapping",3),m=!0;break}g=m?"rgb(245,91,91)":"nms"==t?"rgb(0,192,255)":"xtk"==t?"rgb(200,100,200)":"rgb(255,192,0)";var d=new x.DefaultNodeModel(a,g);return this.globalvars.nodePosY+=50,d.x=this.globalvars.nodePosX,d.y=this.globalvars.nodePosY,e.addNode(d),this.logger("POSITION of "+a+" X:"+this.globalvars.nodePosX+" Y:"+this.globalvars.nodePosY,4),d.addListener({selectionChanged:function(){s.globalvars.selectedSchema=d.name,s.logger("Selected item is : "+s.globalvars.selectedSchema,4)}}),"source"==n&&(this.globalvars.nodePosX+=400,this.globalvars.nodePosY=120),this.globalvars.nodePosY>2500&&(this.globalvars.nodePosX+=400,this.globalvars.nodePosY=120),d}},{key:"createPortIfNotExist",value:function(e,a){var t="";return t=a?"<":">",e.getPort(t)?e.getPort(t):e.addPort(new x.DefaultPortModel(a,t,t))}},{key:"parsePreset",value:function(e,a){return"custom"==this.globalvars.preset&&"xtk"==e||"nms"==e&&"trackingLogRcp"!=a&&"broadLogRcp"!=a&&"recipient"!=a&&"delivery"!=a&&"operation"!=a&&"subscription"!=a?(this.logger("===> Filtered schema by preset : "+e+":"+a,4),!1):"standard"!=this.globalvars.preset||"xtk"!=e}},{key:"generateSchema",value:function(){var e=this.globalvars.jsonData;if(this.logger("===> GenerateSchema jsondata : "+e,4),this.logger("===> GenerateSchema for: "+e.schema_name,4),!e.schema_name)return!1;var a=this.createNodeIfNotExist(z,e.schema_namespace+":"+e.schema_name,e.schema_namespace,"source"),t=(this.createPortIfNotExist(a,!0),this.createPortIfNotExist(a,!1)),n=0,s=this.globalvars.columnsdepth;for(o in this.logger("MAX COLUMNS TO DISPLAY : "+s,3),e.attributes){n++;var r=e.attributes[o].fieldName,l=e.attributes[o].fieldType;if(o>s){a.addInPort("... (Limit to "+s+". Other fields filtered...)");break}a.addInPort(r+" ("+l+")")}var o=0,i=0,c="";for(o in e.links)if(e.links[o].joinparts[0].source_name&&(this.logger(e.links[o].link_target_namespace+":"+e.links[o].link_target+" => "+n,4),this.parsePreset(e.links[o].link_target_namespace,e.links[o].link_target))){c=(c=(c+="{\n")+'"namespace":"'+e.links[o].link_target_namespace+'",\n')+'"schema":"'+e.links[o].link_target+'"\n',c+="},\n";var m=this.createNodeIfNotExist(z,e.links[o].link_target_namespace+":"+e.links[o].link_target,e.links[o].link_target_namespace,"dest"),g=this.createPortIfNotExist(m,!0),d=this.createPortIfNotExist(m,!1);this.logger(d,4);var p="";for(i in e.links[o].joinparts){if(this.logger("====>"+e.links[o].joinparts[i].source_name,3),e.links[o].joinparts[i].source_name)var u=e.links[o].joinparts[i].source_name;else{u=e.links[o].joinparts[i].destination_name;this.logger("NO EXPLICIT SOURCE for "+e.links[o].link_target,3)}""!=p&&(p+=" AND "),p=p+u+"="+e.links[o].joinparts[i].destination_name}this.logger("+++++++++++++",4),this.logger("LINK from "+e.schema_name+" TO "+e.links[o].link_target+" is Unbound : "+e.links[o].link_unbound,4);var h="";"true"==e.links[o].link_unbound?h+=" [1-N]":"true"==e.links[o].link_external?h+=" [0-1]":h+=" [1-1]","true"==e.links[o].link_reverselink_unbound?h+=" [1-N]":"true"==e.links[o].link_reverselink_external?h+=" [0-1]":h+=" [1-1]";var b=(p=p+h).substr(0,p.indexOf(" [")),v=Object.values(a.getPort("<").getLinks()),f=0,E=!1;for(f in v){var k=v[f].labels[0].label;if(this.logger("OLD LABEL "+o+" : "+k,4),k.substr(k.indexOf("=")+1,k.indexOf(" [")-2-k.indexOf("=")+1)+"="+k.substr(0,k.indexOf("="))==b){E=!0;v[f];this.logger("====> LINK EXISTS ALREADY "+k+" "+p,4);break}}if(E)this.logger("EDITION ANCIEN LIEN : "+k,4);else{var y=t.link(g);y.addLabel(p),z.addLink(y),this.logger("CREATION NOUVEAU LIEN : "+p,4)}}if(this.logger(c,4),!this.globalvars.displayLinks){var N=z.getNodes(),I=0;for(I in Object.keys(N)){var S=z.getNode(N[Object.keys(N)[I]]);1==Object.keys(S.ports).length&&this.logger("to remove : "+S.name,4)}}C.setDiagramModel(z),this.forceUpdate()}},{key:"handleSubmit",value:function(e){var a=document.getElementById("validationUsername").value,t=document.getElementById("validationPassword").value;a&&t?(this.globalvars.API_MAPPINGS_ENDPOINT=this.props.baseURL+"/"+this.globalvars.jsspns+"/diagramGetMappings.jssp?user="+a+"&password="+t,this.globalvars.API_SCHEMA_ENDPOINT=this.props.baseURL+"/"+this.globalvars.jsspns+"/diagramExplorer.jssp?user="+a+"&password="+t+"&schema=",this.logger(this.globalvars.API_MAPPINGS_ENDPOINT,4),this.setState({validated:!0,username:a,password:t}),this.globalvars.selectedSchema?this.logger("Diagram loaded already, DO NOTHING ELSE AT LOGGING",3):(this.logger("loading all schemas with a target mapping : ",3),this.loadMappingsApi(this.globalvars.API_MAPPINGS_ENDPOINT,this.globalvars.maxtoload))):this.setState({validated:!1}),e.preventDefault(),e.stopPropagation()}},{key:"handleConfigSave",value:function(){this.logger("Saving config from Panel",3);for(var e=document.getElementsByName("radioPreset"),a=parseInt(document.getElementsByName("columnDepth")[0].value),t=parseInt(document.getElementsByName("nbmappings")[0].value),n=parseInt(document.getElementsByName("analyzedepth")[0].value),s=document.getElementsByName("jsspnamespace")[0].value,r=parseInt(document.getElementsByName("loggerlevel")[0].value),l=document.getElementsByName("isnocache")[0].checked,o=0;o<e.length;++o)if(e[o].checked){e[o].value,this.globalvars.preset=e[o].value,this.logger("New value for preset: "+e[o].value,3);break}3==s.length?(this.logger("New value for JSSP default namespace: "+s,3),this.globalvars.jsspns=s):this.logger("BAD value for JSSP default namespace: Requires a 3 letters string",3),Number.isInteger(a)?(this.logger("New value for Column Depth: "+a,3),this.globalvars.columnsdepth=a):this.logger("BAD value for Column Depth: Requires an Integer",3),Number.isInteger(t)?(this.logger("New value for Nb Mappings: "+t,3),this.globalvars.maxtoload=t):this.logger("BAD value for Nb Mappings: Requires an Integer",3),Number.isInteger(n)?(this.logger("New value for Analyze Depth: "+n,3),this.globalvars.analyzedepth=n):this.logger("BAD value for Analyze Depth: Requires an Integer",3),Number.isInteger(r)&&r>=0&&r<=4?(this.logger("New value for Logger Level: "+r,3),this.globalvars.loggerLevel=r):this.logger("BAD value for Column Depth: Require an Integer between 0 and 4",3),l?(this.logger("New value for no cache: "+l,3),this.globalvars.nocache="true"):(this.logger("New value for no cache: "+l,3),this.globalvars.nocache="false"),document.getElementById("main-configPanel").style.display="none",this.setState({configPanelLoaded:!1})}},{key:"zoomInSchema",value:function(){var e=window.location.pathname+"?baseurl="+encodeURIComponent(this.props.baseURL)+"&rootschema="+this.globalvars.selectedSchema+"&columnsdepth="+this.globalvars.columnsdepth+"&preset="+this.globalvars.preset+"&loglevel="+this.globalvars.loggerLevel+"&nocache="+this.globalvars.nocache+"&analyzedepth="+this.globalvars.analyzedepth+"&username="+this.state.username+"&password="+this.state.password;console.log(e),window.open(e)}},{key:"render",value:function(){var e=this;this.logger("Rendering",1);var a=this.state.validated;return s.a.createElement("div",null,s.a.createElement("div",{className:"main-menu-bar"},s.a.createElement("h5",null,"\xa0Adobe Campaign Database Diagram Analyzer V1.6 (3rd of August)"),s.a.createElement("div",null,s.a.createElement(A.a,{noValidate:!0,validated:a,onSubmit:function(a){return e.handleSubmit(a)}},s.a.createElement(A.a.Row,null,s.a.createElement(A.a,null,s.a.createElement(A.a.Label,{column:!0,sm:100},"\xa0Instance:\xa0",s.a.createElement("a",{target:"_blank",href:this.props.baseURL},this.props.baseURL),"\xa0\xa0")),s.a.createElement(A.a,null,s.a.createElement(A.a.Group,{as:A.a,md:"3",controlId:"validationUsername"},s.a.createElement(A.a.Control,{type:"text",placeholder:"username",defaultValue:this.state.username,required:!0}))),s.a.createElement(A.a,null,s.a.createElement(A.a.Group,{as:A.a,md:"3",controlId:"validationPassword"},s.a.createElement(A.a.Control,{type:"password",placeholder:"password",defaultValue:this.state.password,required:!0}))),s.a.createElement(A.a,{sm:{span:10,offset:2}},s.a.createElement(h.a,{type:"submit"},"Sign in"))))),s.a.createElement("div",{id:"main-analyzer",className:"main-analyzer"},this.state.analyzerContainer),s.a.createElement("div",{id:"main-configPanel",className:"main-configPanel"},s.a.createElement(D.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",size:"sm"},s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(A.a,null,s.a.createElement(A.a.Group,{as:A.a,controlId:"configMappings"},s.a.createElement(A.a.Row,null,s.a.createElement(A.a.Label,{column:!0,xs:4},"Preset:"),s.a.createElement(A.a,{xs:4},s.a.createElement(A.a.Group,{as:A.a},s.a.createElement(A.a,{sm:10},s.a.createElement(A.a.Check,{type:"radio",label:"Custom",name:"radioPreset",id:"radioPresetCustom",value:"custom"}),s.a.createElement(A.a.Check,{type:"radio",label:"Standard",name:"radioPreset",id:"radioPresetStandard",value:"standard"}),s.a.createElement(A.a.Check,{type:"radio",label:"ALL",name:"radioPreset",id:"radioPresetALL",value:"ALL"})))))),s.a.createElement(A.a.Group,{as:A.a,controlId:"configColumnDepth"},s.a.createElement(A.a.Row,null,s.a.createElement(A.a.Label,{column:!0,xs:4},"Max Colunms to load:"),s.a.createElement(A.a,{xs:4},s.a.createElement(A.a.Control,{name:"columnDepth",type:"text",defaultValue:this.globalvars.columnsdepth,required:!0})))),s.a.createElement(A.a.Group,{as:A.a,controlId:"configMappings"},s.a.createElement(A.a.Row,null,s.a.createElement(A.a.Label,{column:!0,xs:4},"Max Mappings to load:"),s.a.createElement(A.a,{xs:4},s.a.createElement(A.a.Control,{name:"nbmappings",type:"text",defaultValue:this.globalvars.maxtoload,required:!0})))),s.a.createElement(A.a.Group,{as:A.a,controlId:"configAnalyze"},s.a.createElement(A.a.Row,null,s.a.createElement(A.a.Label,{column:!0,xs:4},"Analyze depth (nb days):"),s.a.createElement(A.a,{xs:4},s.a.createElement(A.a.Control,{name:"analyzedepth",type:"text",defaultValue:this.globalvars.analyzedepth,required:!0})))),s.a.createElement(A.a.Group,{as:A.a,controlId:"configJsspNamespace"},s.a.createElement(A.a.Row,null,s.a.createElement(A.a.Label,{column:!0,xs:4},"JSSP default namespace (ex: xtk):"),s.a.createElement(A.a,{xs:4},s.a.createElement(A.a.Control,{name:"jsspnamespace",type:"text",defaultValue:this.globalvars.jsspns,required:!0})))),s.a.createElement(A.a.Group,{as:A.a,controlId:"configLogger"},s.a.createElement(A.a.Row,null,s.a.createElement(A.a.Label,{column:!0,xs:4},"logger lever (0,1,2,3 or 4):"),s.a.createElement(A.a,{xs:4},s.a.createElement(A.a.Control,{name:"loggerlevel",type:"text",defaultValue:this.globalvars.loggerLevel,required:!0})))),s.a.createElement(A.a.Group,{as:A.a,controlId:"formNoCache"},s.a.createElement(A.a,{sm:{span:10,offset:2}},s.a.createElement(A.a.Check,{name:"isnocache",label:"No Cache"}))),s.a.createElement(A.a.Group,{as:A.a},s.a.createElement(A.a,{sm:{span:10,offset:2}},s.a.createElement(h.a,{type:"button",onClick:function(){return e.handleConfigSave()}},"Save")))))))),s.a.createElement("div",null,s.a.createElement(v.a,{"aria-label":"Actions"},s.a.createElement(b.a,{className:"mr-2","aria-label":"Actions group 1"},s.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return C.zoomToFit()}},"Fit to Screen"),s.a.createElement(h.a,{variant:"outline-success",onClick:function(){return e.loadSelectedSchema()}},"Explore Selected Schema"),s.a.createElement(h.a,{variant:"outline-primary",onClick:function(){return e.zoomInSchema()}},"Zoom in selection"),s.a.createElement(h.a,{variant:"outline-dark",onClick:function(){return e.loadSchemaAnalyzer()}},"Analyze Schema"),s.a.createElement(h.a,{variant:"outline-success",onClick:function(){return e.saveGraphViaSerialize()}},"Save Diagram"),s.a.createElement(h.a,{variant:"outline-success",onClick:function(){return e.restoreGraphViaSerialize()}},"Undo action"),s.a.createElement(h.a,{variant:"outline-success",onClick:this.downloadDiagramFile},"Export Diagram"),s.a.createElement(h.a,{variant:"outline-info",onClick:function(){return window.open(e.getDocumentationURL(),"_blank")}},"Schema Documentation"),s.a.createElement(h.a,{variant:"outline-danger",onClick:function(){return window.open(window.location.pathname+"?baseurl="+e.props.baseURL+"&jsspns="+e.globalvars.jsspns+"&columnsdepth="+e.globalvars.columnsdepth+"&maxtoload="+e.globalvars.maxtoload+"&preset="+e.globalvars.preset+"&loglevel="+e.globalvars.loggerLevel+"&analyzedepth="+e.globalvars.analyzedepth+"&nocache="+e.globalvars.nocache+"&username="+e.state.username+"&password="+e.state.password,"_self")}},"Reset Diagram"),s.a.createElement(h.a,{variant:"outline-danger",onClick:function(){return e.loadConfigPanel()}},"Advanced Config"))),s.a.createElement(f.a,{now:this.globalvars.loadingProgress})),s.a.createElement("div",{className:"main-dropzone"},s.a.createElement(w.a,{onDrop:function(a){return e.loadDiagramFromFile(a)}},function(e){var a=e.getRootProps,t=e.getInputProps;return s.a.createElement("section",null,s.a.createElement("div",a(),s.a.createElement("input",t()),"LOAD A DIAGRAM => Drag a JSON file here, or click to select file ..."))}))),s.a.createElement("div",null,s.a.createElement(x.DiagramWidget,{diagramEngine:C})))}}]),a}(n.Component),C=new x.DiagramEngine;C.installDefaultFactories();var z=new x.DiagramModel,j=L;var _=function(){var e=t(80).parse(window.location.search),a="";a=1==!e.baseurl?window.location.origin:e.baseurl;var n=e.rootschema,r=e.columnsdepth,l=e.preset,o=e.loglevel,i=e.maxtoload,c=e.analyzedepth,m=e.sampling,g=e.username,d=e.password,p=e.nocache,u="";return u=e.jsspns?e.jsspns:"xtk",s.a.createElement(j,{baseURL:a,jsspns:u,rootSchema:n,columnsdepth:r,preset:l,loglevel:o,maxtoload:i,analyzedepth:c,sampling:m,username:g,password:d,nocache:p})};l.a.render(s.a.createElement(_,null),document.getElementById("diagramExplorer")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[49,1,2]]]);
//# sourceMappingURL=main.b276bf83.chunk.js.map